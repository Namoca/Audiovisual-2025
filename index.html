<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Ranking Audiovisual Pro</title>
    <style>
        :root { --primary: #ffd700; --bg-dark: #0a0a0a; --card-bg: #1a1a1a; --text-gray: #aaa; --transition: all 0.3s ease; }
        body { font-family: 'Segoe UI', system-ui, sans-serif; background-color: var(--bg-dark); color: #eee; padding: 20px; margin: 0; }
        
        /* Estilo da Propaganda */
        .banner-container {
            position: relative;
            max-width: 500px;
            margin: 0 auto 30px;
            background: #151515;
            border: 1px solid #333;
            border-radius: 12px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100px;
            animation: surgimento 0.5s ease-out;
        }
        .banner-container img { width: 100%; height: auto; display: block; max-height: 300px; object-fit: cover; }
        .btn-fechar-ad {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            color: #fff;
            border: 1px solid #555;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            transition: var(--transition);
            z-index: 10;
        }
        .btn-fechar-ad:hover { background: #ff4444; border-color: #ff4444; }

        h1 { text-align: center; color: var(--primary); margin-bottom: 30px; }
        
        .controles { max-width: 800px; margin: 0 auto 30px; text-align: center; }
        #busca { width: 100%; max-width: 400px; padding: 12px 20px; border-radius: 25px; border: 1px solid #333; background: #1a1a1a; color: white; outline: none; margin-bottom: 20px; transition: var(--transition); }
        #busca:focus { border-color: var(--primary); }
        
        .botoes-container { display: flex; flex-direction: column; gap: 15px; align-items: center; }
        .grupo-botoes { display: flex; flex-wrap: wrap; justify-content: center; gap: 8px; }
        
        button { background: #222; color: #eee; border: 1px solid #444; padding: 8px 16px; border-radius: 6px; cursor: pointer; transition: var(--transition); }
        button:hover { background: #333; border-color: var(--primary); }
        
        .btn-inverter { background: #2a2a2a; border-color: #555; font-weight: bold; padding: 10px 20px; margin-top: 5px; }
        .btn-inverter:hover { background: var(--primary); color: #000; }

        .ranking { max-width: 850px; margin: auto; }
        .item { display: flex; align-items: stretch; gap: 20px; background: var(--card-bg); margin-bottom: 20px; padding: 15px; border-radius: 12px; border: 1px solid #2a2a2a; animation: surgimento 0.5s ease-out; transition: var(--transition); }
        .item:hover { transform: translateY(-3px); border-color: #444; box-shadow: 0 10px 20px rgba(0,0,0,0.4); }
        .posicao { display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: bold; color: var(--primary); min-width: 50px; border-right: 1px solid #333; padding-right: 10px; }
        .img-container { width: 120px; display: flex; align-items: center; }
        .item img { width: 120px; height: 100%; min-height: 120px; object-fit: cover; border-radius: 8px; background: #222; }
        .conteudo { flex: 1; display: flex; flex-direction: column; justify-content: center; gap: 5px; }
        .tag-tipo { font-size: 10px; text-transform: uppercase; color: var(--primary); letter-spacing: 1px; margin-bottom: 4px; opacity: 0.8; }
        .titulo { font-size: 1.2rem; font-weight: bold; color: #fff; line-height: 1.2; }
        .descricao { font-size: 0.95rem; color: var(--text-gray); margin-top: 5px; }
        .estrelas { color: var(--primary); font-size: 18px; margin-top: 10px; letter-spacing: 2px; display: flex; align-items: center; }

        .card-disclaimer { background: var(--card-bg); padding: 30px; border-radius: 12px; border: 1px dashed #444; line-height: 1.6; color: var(--text-gray); animation: surgimento 0.5s ease-out; }
        .card-disclaimer h2 { color: var(--primary); margin-top: 0; }

        @keyframes surgimento { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        @media (max-width: 480px) { .item { flex-direction: column; } .posicao { border-right: none; border-bottom: 1px solid #333; padding: 0 0 10px 0; } .img-container { width: 100%; justify-content: center; } .item img { width: 100%; max-width: 200px; } }
    </style>
</head>
<body>

<div id="propaganda" class="banner-container">
    <button class="btn-fechar-ad" onclick="fecharPropaganda()" title="Fechar an√∫ncio">√ó</button>
    <img src="img/anuncio.png" alt="An√∫ncio">
</div>

<h1>üèÜ Ranking de Experi√™ncias</h1>

<div class="controles">
    <input type="text" id="busca" placeholder="Pesquisar t√≠tulo..." oninput="filtrar()">
    
    <div class="botoes-container">
        <div class="grupo-botoes">
            <button onclick="mostrarRanking('geral')">üåå Geral</button>
            <button onclick="mostrarRanking('series')">üì∫ S√©ries</button>
            <button onclick="mostrarRanking('filmes')">üé¨ Filmes</button>
            <button onclick="mostrarRanking('jogos')">üéÆ Jogos</button>
            <button onclick="mostrarDisclaimer()">‚öñÔ∏è Aviso</button>
        </div>

        <div class="grupo-botoes">
            <button class="btn-inverter" onclick="inverterOrdem()">üîÅ Inverter Ordem</button>
        </div>
    </div>
</div>

<div id="ranking-container" class="ranking"></div>

<script src="dados.js"></script>

<script>
    let filtroAtual = "geral";
    let ordemNormal = false;
    let termoBusca = "";
    let visualizandoDisclaimer = false;

    function fecharPropaganda() {
        document.getElementById('propaganda').style.display = 'none';
    }

    function escapeHTML(str) {
        const p = document.createElement('p');
        p.textContent = str;
        return p.innerHTML;
    }

    function gerarEstrelas(nota) {
        const nota5 = nota / 2;
        let estrelasHTML = '';
        for (let i = 1; i <= 5; i++) {
            if (nota5 >= i) {
                estrelasHTML += '‚òÖ'; 
            } else if (nota5 >= i - 0.5) {
                estrelasHTML += '<span style="position:relative; display:inline-block;">' +
                               '<span style="color:#444">‚òÜ</span>' +
                               '<span style="position:absolute; left:0; top:0; width:45%; overflow:hidden;">‚òÖ</span>' +
                               '</span>';
            } else {
                estrelasHTML += '<span style="color:#444">‚òÜ</span>'; 
            }
        }
        return estrelasHTML;
    }

    function renderizarRanking() {
        const container = document.getElementById("ranking-container");
        
        if (visualizandoDisclaimer) {
            container.innerHTML = `
                <div class="card-disclaimer">
                    <h2>‚öñÔ∏è Disclaimer / Aviso Legal</h2>
                    <p>As avalia√ß√µes e notas apresentadas neste ranking refletem apenas uma <strong>opini√£o pessoal e subjetiva</strong> baseada na minha experi√™ncia individual com cada obra.</p>
                    <p>Este ranking n√£o possui car√°ter t√©cnico absoluto. Os crit√©rios s√£o baseados em gosto pessoal, impacto emocional e qualidade t√©cnica percebida.</p>
                    <hr style="border:0; border-top:1px solid #333; margin:20px 0;">
                    <p><small>As imagens e marcas citadas s√£o de propriedade de seus respectivos detentores de direitos. Uso meramente ilustrativo.</small></p>
                </div>
            `;
            return;
        }

        let lista = filtroAtual === "geral" ? [...obras] : obras.filter(o => o.tipo === filtroAtual);
        
        if (termoBusca) {
            lista = lista.filter(o => o.titulo.toLowerCase().includes(termoBusca.toLowerCase()));
        }
        
        lista.sort((a, b) => b.nota - a.nota);
        const totalItens = lista.length;
        if (!ordemNormal) lista.reverse();

        container.innerHTML = lista.map((obra, index) => {
            const posicaoReal = ordemNormal ? (index + 1) : (totalItens - index);
            return `
                <div class="item">
                    <div class="posicao">#${posicaoReal}</div>
                    <div class="img-container">
                        <img src="${obra.imagem}" alt="Poster" onerror="this.src='https://via.placeholder.com/120x150?text=Erro'">
                    </div>
                    <div class="conteudo">
                        <div class="tag-tipo">${obra.tipo}</div>
                        <div class="titulo">${escapeHTML(obra.titulo)}</div>
                        <div class="descricao">${escapeHTML(obra.descricao)}</div>
                        <div class="estrelas">${gerarEstrelas(obra.nota)}</div>
                    </div>
                </div>
            `;
        }).join('') || "<p style='text-align:center; color:#666'>Nenhum resultado encontrado.</p>";
    }

    function mostrarRanking(tipo) { 
        visualizandoDisclaimer = false;
        filtroAtual = tipo; 
        renderizarRanking(); 
    }

    function mostrarDisclaimer() {
        visualizandoDisclaimer = true;
        renderizarRanking();
    }

    function inverterOrdem() { 
        if(visualizandoDisclaimer) visualizandoDisclaimer = false;
        ordemNormal = !ordemNormal; 
        renderizarRanking(); 
    }

    function filtrar() { 
        visualizandoDisclaimer = false;
        termoBusca = document.getElementById("busca").value; 
        renderizarRanking(); 
    }

    renderizarRanking();
</script>
</body>
</html>