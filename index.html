<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Ranking Audiovisual Pro</title>
    <style>
        :root {
            --primary: #ffd700;
            --bg-dark: #0a0a0a;
            --card-bg: #1a1a1a;
            --text-gray: #aaa;
            --transition: all 0.3s ease;
        }

        body { 
            font-family: 'Segoe UI', system-ui, sans-serif; 
            background-color: var(--bg-dark); 
            color: #eee; 
            padding: 20px; 
            margin: 0;
        }

        h1 { text-align: center; color: var(--primary); margin-bottom: 30px; }

        .controles { max-width: 800px; margin: 0 auto 30px; text-align: center; }
        
        #busca { 
            width: 100%; max-width: 400px; padding: 12px 20px; border-radius: 25px; 
            border: 1px solid #333; background: #1a1a1a; color: white; outline: none;
            margin-bottom: 15px; transition: var(--transition);
        }
        #busca:focus { border-color: var(--primary); }

        .botoes button { 
            background: #222; color: #eee; border: 1px solid #444; 
            padding: 8px 16px; margin: 4px; border-radius: 6px; cursor: pointer;
            transition: var(--transition);
        }
        .botoes button:hover { background: #333; border-color: var(--primary); }

        .ranking { max-width: 850px; margin: auto; }

        .item { 
            display: flex; 
            align-items: stretch;
            gap: 20px; 
            background: var(--card-bg); 
            margin-bottom: 20px; 
            padding: 15px; 
            border-radius: 12px; 
            border: 1px solid #2a2a2a;
            animation: surgimento 0.5s ease-out;
            transition: var(--transition);
        }
        .item:hover { transform: translateY(-3px); border-color: #444; box-shadow: 0 10px 20px rgba(0,0,0,0.4); }

        .posicao { 
            display: flex; align-items: center; justify-content: center;
            font-size: 24px; font-weight: bold; color: var(--primary); 
            min-width: 50px; border-right: 1px solid #333; padding-right: 10px;
        }

        .img-container { width: 120px; display: flex; align-items: center; }

        .item img { 
            width: 120px; height: 100%; min-height: 120px; 
            object-fit: cover; border-radius: 8px; background: #222;
        }

        .conteudo {
            flex: 1; display: flex; flex-direction: column;
            justify-content: center; gap: 5px;
        }

        .tag-tipo { 
            font-size: 10px; text-transform: uppercase; color: var(--primary); 
            letter-spacing: 1px; margin-bottom: 4px; opacity: 0.8;
        }

        .titulo { font-size: 1.2rem; font-weight: bold; color: #fff; line-height: 1.2; }
        .descricao { font-size: 0.95rem; color: var(--text-gray); margin-top: 5px; }

        /* ESTRELAS */
        .estrelas {
            color: var(--primary);
            font-size: 18px;
            margin-top: 10px;
            letter-spacing: 2px;
            display: flex;
            align-items: center;
        }

        /* Estilo para simular a meia estrela de forma compat√≠vel */
        .meia-estrela {
            position: relative;
            display: inline-block;
            width: 1ch;
            overflow: hidden;
            white-space: nowrap;
        }

        @keyframes surgimento {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        /* Ajuste responsivo b√°sico para celulares muito pequenos */
        @media (max-width: 480px) {
            .item { flex-direction: column; }
            .posicao { border-right: none; border-bottom: 1px solid #333; padding: 0 0 10px 0; }
            .img-container { width: 100%; justify-content: center; }
            .item img { width: 100%; max-width: 200px; }
        }
    </style>
</head>
<body>

<h1>üèÜ Ranking de Experi√™ncias</h1>

<div class="controles">
    <input type="text" id="busca" placeholder="Pesquisar..." oninput="filtrar()">
    <div class="botoes">
        <button onclick="mostrarRanking('geral')">üåå Geral</button>
        <button onclick="mostrarRanking('series')">üì∫ S√©ries</button>
        <button onclick="mostrarRanking('filmes')">üé¨ Filmes</button>
        <button onclick="mostrarRanking('jogos')">üéÆ Jogos</button>
        <button onclick="inverterOrdem()">üîÅ Inverter</button>
    </div>
</div>

<div id="ranking-container" class="ranking"></div>

<script>
const obras = [
    { 
		tipo: "series", 
		titulo: "Twin Peaks: The Return (2017)", 
		imagem: "img/cavalo.jpeg", 
		descricao: "Uma experi√™ncia audiovisual radical onde o design de som e o sil√™ncio dominam a narrativa.", 
		nota: 3.0 
	},
    { 
		tipo: "series", titulo: "Dark (2017‚Äì2020)", 
		imagem: "https://upload.wikimedia.org/wikipedia/en/d/da/DarkNetflixPosterEnglish.jpg", 
		descricao: "Atmosfera densa e trilha eletr√¥nica opressiva que se molda √† trama temporal.", 
		nota: 9.2 
	},
    { 
		tipo: "filmes", 
		titulo: "Blade Runner 2049 (2017)", 
		imagem: "https://upload.wikimedia.org/wikipedia/en/8/8c/Blade_Runner_2049_poster.png", 
		descricao: "Sil√™ncio absoluto e composi√ß√£o visual contemplativa monumental.", 
		nota: 9.7 
	},
    { 
		tipo: "filmes", 
		titulo: "Interestelar (2014)", 
		imagem: "https://upload.wikimedia.org/wikipedia/en/b/bc/Interstellar_film_poster.jpg", 
		descricao: "A trilha sonora avassaladora encontra imagens c√≥smicas de tirar o f√¥lego.", 
		nota: 9.6 
	},
    { 
		tipo: "jogos", 
		titulo: "INSIDE (2016)", 
		imagem: "https://upload.wikimedia.org/wikipedia/en/5/5e/Inside_cover_art.png", 
		descricao: "Narrativa puramente visual com imers√£o sonora opressiva.", 
		nota: 9.9 
	},
    { 
		tipo: "jogos", 
		titulo: "Journey (2012)", 
		imagem: "https://upload.wikimedia.org/wikipedia/en/9/9f/Journey_Game_Cover.png", 
		descricao: "Minimalismo visual e uma jornada musical evolutiva.", 
		nota: 9.4 
	}
];

let filtroAtual = "geral";
let ordemNormal = false;
let termoBusca = "";

function escapeHTML(str) {
    const p = document.createElement('p');
    p.textContent = str;
    return p.innerHTML;
}

// Fun√ß√£o atualizada para m√°xima compatibilidade mobile
function gerarEstrelas(nota) {
    const nota5 = nota / 2;
    let estrelasHTML = '';
    
    for (let i = 1; i <= 5; i++) {
        if (nota5 >= i) {
            estrelasHTML += '‚òÖ'; 
        } else if (nota5 >= i - 0.5) {
            // Cria uma meia estrela usando sobreposi√ß√£o (compat√≠vel com todos os celulares)
            estrelasHTML += '<span style="position:relative; display:inline-block;">' +
                           '<span style="color:#444">‚òÜ</span>' +
                           '<span style="position:absolute; left:0; top:0; width:50%; overflow:hidden;">‚òÖ</span>' +
                           '</span>';
        } else {
            estrelasHTML += '<span style="color:#444">‚òÜ</span>'; 
        }
    }
    return estrelasHTML;
}

function renderizarRanking() {
    const container = document.getElementById("ranking-container");
    let lista = filtroAtual === "geral" ? [...obras] : obras.filter(o => o.tipo === filtroAtual);
    
    if (termoBusca) {
        lista = lista.filter(o => o.titulo.toLowerCase().includes(termoBusca.toLowerCase()));
    }
    
    lista.sort((a, b) => b.nota - a.nota);
    const totalItens = lista.length;
    if (!ordemNormal) lista.reverse();

    container.innerHTML = lista.map((obra, index) => {
        const posicaoReal = ordemNormal ? (index + 1) : (totalItens - index);
        
        return `
            <div class="item">
                <div class="posicao">#${posicaoReal}</div>
                
                <div class="img-container">
                    <img src="${obra.imagem}" alt="Poster" onerror="this.src='https://via.placeholder.com/120x150?text=Erro'">
                </div>

                <div class="conteudo">
                    <span class="tag-tipo">${obra.tipo}</span>
                    <div class="titulo">${escapeHTML(obra.titulo)}</div>
                    <div class="descricao">${escapeHTML(obra.descricao)}</div>
                    <div class="estrelas">${gerarEstrelas(obra.nota)}</div>
                </div>
            </div>
        `;
    }).join('') || "<p style='text-align:center; color:#666'>Nenhum resultado encontrado.</p>";
}

function mostrarRanking(tipo) { filtroAtual = tipo; renderizarRanking(); }
function inverterOrdem() { ordemNormal = !ordemNormal; renderizarRanking(); }
function filtrar() { termoBusca = document.getElementById("busca").value; renderizarRanking(); }

renderizarRanking();
</script>
</body>
</html>