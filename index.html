<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Ranking Audiovisual Pro</title>
    <style>
        body { font-family: 'Segoe UI', Arial, sans-serif; background-color: #111; color: #eee; padding: 20px; }
        h1 { text-align: center; color: gold; margin-bottom: 30px; }
        
        .controles { max-width: 800px; margin: 0 auto 30px; text-align: center; }
        
        .busca-container { margin-bottom: 20px; }
        #busca { 
            width: 100%; max-width: 400px; padding: 12px; border-radius: 25px; 
            border: 1px solid #444; background: #222; color: white; outline: none;
            transition: 0.3s;
        }
        #busca:focus { border-color: gold; box-shadow: 0 0 10px rgba(255, 215, 0, 0.2); }

        .botoes button { 
            background: #222; color: #eee; border: 1px solid #444; 
            padding: 10px 20px; margin: 5px; border-radius: 8px; cursor: pointer;
            transition: 0.3s;
        }
        .botoes button:hover { background: #333; border-color: gold; }

        .ranking { max-width: 800px; margin: auto; }
        
        .item { 
            display: flex; align-items: center; gap: 20px; 
            background: #1e1e1e; margin-bottom: 15px; padding: 15px; 
            border-radius: 12px; border: 1px solid #333;
            animation: surgimento 0.4s ease-out; /* Anima√ß√£o aqui */
        }

        @keyframes surgimento {
            from { opacity: 0; transform: translateY(15px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .item img { width: 100px; height: 150px; border-radius: 8px; object-fit: cover; }
        .posicao { font-size: 28px; font-weight: bold; color: gold; min-width: 50px; text-align: center; }
        .titulo { font-size: 20px; font-weight: bold; margin-bottom: 5px; }
        .descricao { font-size: 14px; color: #aaa; }
    </style>
</head>
<body>

<h1>üèÜ Ranking de Experi√™ncias</h1>

<div class="controles">
    <div class="busca-container">
        <input type="text" id="busca" placeholder="Pesquisar t√≠tulo..." oninput="filtrar()">
    </div>
    <div class="botoes">
        <button onclick="mostrarRanking('geral')">üåå Geral</button>
        <button onclick="mostrarRanking('series')">üì∫ S√©ries</button>
        <button onclick="mostrarRanking('filmes')">üé¨ Filmes</button>
        <button onclick="mostrarRanking('jogos')">üéÆ Jogos</button>
        <button onclick="inverterOrdem()">üîÅ Inverter Ordem</button>
    </div>
</div>

<div id="ranking-container" class="ranking"></div>

<script>
const obras = [
    { tipo: "series", titulo: "Twin Peaks: The Return (2017)", imagem: "img/cavalo.jpeg", descricao: "Experi√™ncia radical onde som e sil√™ncio dominam.", nota: 9.8 },
    { tipo: "series", titulo: "Dark (2017‚Äì2020)", imagem: "https://upload.wikimedia.org/wikipedia/en/d/da/DarkNetflixPosterEnglish.jpg", descricao: "Atmosfera densa e trilha eletr√¥nica opressiva.", nota: 9.2 },
    { tipo: "filmes", titulo: "Blade Runner 2049 (2017)", imagem: "https://upload.wikimedia.org/wikipedia/en/8/8c/Blade_Runner_2049_poster.png", descricao: "Sil√™ncio e composi√ß√£o visual contemplativa.", nota: 9.7 },
    { tipo: "filmes", titulo: "Interestelar (2014)", imagem: "https://upload.wikimedia.org/wikipedia/en/b/bc/Interstellar_film_poster.jpg", descricao: "Trilha sonora avassaladora e imagens c√≥smicas.", nota: 9.6 },
    { tipo: "jogos", titulo: "INSIDE (2016)", imagem: "https://upload.wikimedia.org/wikipedia/en/5/5e/Inside_cover_art.png", descricao: "Narrativa silenciosa e imers√£o opressiva.", nota: 9.9 },
    { tipo: "jogos", titulo: "Journey (2012)", imagem: "https://upload.wikimedia.org/wikipedia/en/9/9f/Journey_Game_Cover.png", descricao: "Minimalismo visual e musical contemplativo.", nota: 9.4 }
];

let filtroAtual = "geral";
let ordemNormal = true;
let termoBusca = "";

function escapeHTML(str) {
    const p = document.createElement('p');
    p.textContent = str;
    return p.innerHTML;
}

function renderizarRanking() {
    const container = document.getElementById("ranking-container");
    
    // 1. Filtrar por tipo
    let lista = filtroAtual === "geral" ? [...obras] : obras.filter(o => o.tipo === filtroAtual);
    
    // 2. Filtrar por termo de busca
    if (termoBusca) {
        lista = lista.filter(o => o.titulo.toLowerCase().includes(termoBusca.toLowerCase()));
    }
    
    // 3. Ordenar por nota (para definir o rank original)
    lista.sort((a, b) => b.nota - a.nota);
    const totalItens = lista.length;

    // 4. Inverter se necess√°rio
    if (!ordemNormal) {
        lista.reverse();
    }

    const htmlTotal = lista.map((obra, index) => {
        const posicaoReal = ordemNormal ? (index + 1) : (totalItens - index);
        return `
            <div class="item">
                <div class="posicao">#${posicaoReal}</div>
                <img src="${obra.imagem}" alt="Poster">
                <div>
                    <div class="titulo">${escapeHTML(obra.titulo)}</div>
                    <div class="descricao">${escapeHTML(obra.descricao)}</div>
                </div>
            </div>
        `;
    }).join('');

    container.innerHTML = htmlTotal || "<p style='text-align:center'>Nenhum resultado encontrado.</p>";
}

function mostrarRanking(tipo) {
    filtroAtual = tipo;
    renderizarRanking();
}

function inverterOrdem() {
    ordemNormal = !ordemNormal;
    renderizarRanking();
}

function filtrar() {
    termoBusca = document.getElementById("busca").value;
    renderizarRanking();
}

renderizarRanking();
</script>
</body>
</html>